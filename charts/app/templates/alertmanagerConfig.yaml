# apiVersion: monitoring.coreos.com/v1alpha1                                                                                                                                                                                                                                                       
# kind: AlertmanagerConfig                                                                                                                                                                                                                                                                         
# metadata:                                                                                                                                                                                                                                                                                        
#   name: alerts                                                                                                                                                                                                                                                                                        
# spec:                                                                                                                                                                                                                                                                                            
#   receivers:                                                                                                                                                                                                                                                                                     
#   - name: slack                                                                                                                                                                                                                                                                                  
#     slackConfigs:                                                                                                                                                                                                                                                                                
#     - channel: '#saga-alerts'
#       sendResolved: true        

#       text: |
#         {{`{{ range .Alerts }}                                                                                                                                                                                                                                                                      
#          *Alert:* {{ .Annotations.summary }} - '{{ .Labels.severity }}'                                                                                                                                                                                                                      
#          *Description:* {{ .Annotations.description }}                                                                                                                                                                                                                                            
#          *Graph:* <{{ .GeneratorURL }}|:chart_with_upwards_trend:> *Runbook:* <{{ .Annotations.runbook }}|:spiral_note_pad:>                                                                                                                                                                      
#          *Details:*                                                                                                                                                                                                                                                                               
#          {{ range .Labels.SortedPairs }} â€¢ *{{ .Name }}:* '{{ .Value }}'                                                                                                                                                                                                                          
#          {{ end }}                                                                                                                                                                                                                                                                                
#          {{ end }}  `}}                                                                                                                                                                                                                                                                                 

#       title : {{ `'[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] Monitoring Event Notification'` }}
#   route:                                                                                                                                                                                                                                                                                         
#     receiver: slack                                                                                                                                                                                                                                                                              
#     repeatInterval: 1h